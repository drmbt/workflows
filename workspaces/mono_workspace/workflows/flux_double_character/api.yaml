name: Combine Characters (FLUX)
description: Combine two LoRA characters into a single image
tip: |-
  This tool uses two FLUX LoRA models to generate an image that combines the character/object of each model into a single image.
output_type: image
cost_estimate: 4 * n_samples
thumbnail: app/double_character.jpg
status: prod
active: true
resolutions: [21-9_1536x640, 16-9_1344x768, 3-2_1216x832, 4-3_1152x896, 1-1_1024x1024, 3-4_896x1152, 2-3_832x1216, 9-16_768x1344, 9-21_640x1536]
handler: comfyui
base_model: flux-dev
comfyui_output_node_id: 161
comfyui_intermediate_outputs:
  double_char_img_01: 172
  double_char_mask: 173
parameters:
  prompt:
    type: string
    label: Prompt
    description: Describe an image depicting two characters/objects by mentioning their LoRA name.
    tip: |-
      Try to keep the prompt somewhat short and to the point (max 30 words). The more concise and clear your prompt, the better the results.
    required: true
    default: null
    comfyui:
      node_id: 109
      field: inputs
      subfield: value
  trigger_1:
    type: string
    label: trigger_text_1
    description: Trigger text for lora_1
    default: null
    hide_from_ui: true
    hide_from_agent: true
    comfyui:
      node_id: 138
      field: inputs
      subfield: value
  trigger_2:
    type: string
    label: trigger_text_2
    description: Trigger text for lora_2
    hide_from_ui: true
    hide_from_agent: true
    default: null
    comfyui:
      node_id: 139
      field: inputs
      subfield: value
  width:
    type: integer
    label: Width
    description: Width in pixels
    required: true
    default: 1024
    minimum: 256
    maximum: 2048
    step: 8
    comfyui:
      node_id: 6
      field: inputs
      subfield: width
  height:
    type: integer
    label: Height
    description: Height in pixels
    required: true
    default: 1024
    minimum: 256
    maximum: 2048
    step: 8
    comfyui:
      node_id: 6
      field: inputs
      subfield: height
  lora:
    type: lora
    label: Trained model (LoRA)
    description: Activate a custom, LoRA finetuned model
    required: true
    comfyui:
      node_id: 108
      field: inputs
      subfield: lora_name
  lora_strength:
    type: float
    label: Model Strength
    description: Strength of the custom model (LoRA). Decrease this value to improve prompt adherence. Increase to get more of the LoRA style.
    tip: |-
      If outputs resemble the LoRA but have low prompt adherence or all look the same, turn down the LoRA strength. Typical range is 0.5-1.0
    default: 0.85
    minimum: 0.0
    maximum: 1.25
    step: 0.01
    comfyui:
      node_id: 108
      field: inputs
      subfield: strength_model
  lora2:
    type: lora
    label: Trained model (LoRA) 2
    description: Activate a custom, LoRA finetuned model
    required: true
    comfyui:
      node_id: 133
      field: inputs
      subfield: lora_name
  lora2_strength:
    type: float
    label: Model Strength 2
    description: Strength of the second model (LoRA).
    tip: |-
      You can almost always leave this at default. If outputs resemble the LoRA but have low prompt adherence or all look the same, turn down this strength. Typical range is 0.5-1.0
    default: 0.95
    minimum: 0.0
    maximum: 1.25
    step: 0.01
    comfyui:
      node_id: 133
      field: inputs
      subfield: strength_model
  second_pass_denoise:
    type: float
    label: Second character denoise
    description: AI strength when using the second lora
    tip: |-
      This determines how much denoising is done when the second (inpainting) pass is happening with lora2. Increase this value when the second character is not coming through strong enough or has too many visual features of character 1.
    hide_from_agent: true
    default: 0.85
    minimum: 0.5
    maximum: 1.0
    step: 0.01
    comfyui:
      node_id: 116
      field: inputs
      subfield: denoise
  seed:
    type: integer
    label: Seed
    description: Set random seed for reproducibility. If blank, will be set to a random value.
    tip: |-
      You should only set this if you want to start from/copy the seed of a previous image. 
      Unless one is specified, you should leave this blank!
    default: random
    minimum: 0
    maximum: 2147483647
    comfyui:
      node_id: 121
      field: inputs
      subfield: seed
  n_samples:
    type: integer
    label: Number of samples
    description: Number of samples to generate
    tip: |-
      This is the number of outputs generated for this prompt. If you get a request for n_samples > 1, you are still using a *single* prompt for the whole set.
    default: 1
    minimum: 1
    maximum: 4
